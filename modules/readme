This code is same but uses modules
